<!doctype html>
<html lang="en-US" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Analysis of Applicable Models and Scenarios for TCC | Apache Seata</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seata.apache.org/img/seata_logo.png"><meta data-rh="true" name="twitter:image" content="https://seata.apache.org/img/seata_logo.png"><meta data-rh="true" property="og:url" content="https://seata.apache.org/blog/tcc-mode-applicable-scenario-analysis"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Analysis of Applicable Models and Scenarios for TCC | Apache Seata"><meta data-rh="true" name="description" content="Fescar 0.4.0 version released the TCC model, contributed by the ant gold service team, welcome to try, the end of the article also provides the project follow-up Roadmap, welcome to pay attention."><meta data-rh="true" property="og:description" content="Fescar 0.4.0 version released the TCC model, contributed by the ant gold service team, welcome to try, the end of the article also provides the project follow-up Roadmap, welcome to pay attention."><meta data-rh="true" name="keywords" content="seata,distributed transaction,TCC,roadmap"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2019-03-27T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/seata_logo_small.jpeg"><link data-rh="true" rel="canonical" href="https://seata.apache.org/blog/tcc-mode-applicable-scenario-analysis"><link data-rh="true" rel="alternate" href="https://seata.apache.org/blog/tcc-mode-applicable-scenario-analysis" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://seata.apache.org/zh-cn/blog/tcc-mode-applicable-scenario-analysis" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://seata.apache.org/blog/tcc-mode-applicable-scenario-analysis" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ICHFIJRDZF-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Seata RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Seata Atom Feed">


<link rel="search" type="application/opensearchdescription+xml" title="Apache Seata" href="/opensearch.xml">


<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=seata"><link rel="stylesheet" href="/assets/css/styles.9644caf2.css">
<script src="/assets/js/runtime~main.bf98ee01.js" defer="defer"></script>
<script src="/assets/js/main.8371dd70.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/seata_logo.png" alt="Seata Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/seata_logo.png" alt="Seata Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" docid="/overview/what-is-seata" href="/docs/overview/what-is-seata">v2.2</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/overview/what-is-seata">Next Version</a></li><li><a class="dropdown__link" href="/docs/overview/what-is-seata">v2.2</a></li><li><a class="dropdown__link" href="/docs/v2.1/overview/what-is-seata">v2.1</a></li><li><a class="dropdown__link" href="/docs/v2.0/overview/what-is-seata">v2.0</a></li><li><a class="dropdown__link" href="/docs/v1.8/overview/what-is-seata">v1.8</a></li><li><a class="dropdown__link" href="/docs/v1.7/overview/what-is-seata">v1.7</a></li><li><a class="dropdown__link" href="/docs/v1.6/overview/what-is-seata">v1.6</a></li><li><a class="dropdown__link" href="/docs/v1.5/overview/what-is-seata">v1.5</a></li><li><a class="dropdown__link" href="/docs/v1.4/overview/what-is-seata">v1.4</a></li><li><a class="dropdown__link" href="/docs/v1.3/overview/what-is-seata">v1.3</a></li><li><a class="dropdown__link" href="/docs/v1.2/overview/what-is-seata">v1.2</a></li><li><a class="dropdown__link" href="/docs/v1.1/overview/what-is-seata">v1.1</a></li><li><a class="dropdown__link" href="/docs/v1.0/overview/what-is-seata">v1.0</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/developers/contributor-guide/new-contributor-guide_dev">Developers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/users">Users</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/unversioned/download/seata-server">Download</a><a class="navbar__item navbar__link" href="/solution">Solution</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Designer</a><ul class="dropdown__menu"><li><a href="/saga-designer" class="dropdown__link" target="_blank">Saga Designer</a></li><li><a href="/saga-designer-legacy" class="dropdown__link" target="_blank">Saga Designer (Legacy)</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>En</a><ul class="dropdown__menu"><li><a href="/blog/tcc-mode-applicable-scenario-analysis" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">En</a></li><li><a href="/zh-cn/blog/tcc-mode-applicable-scenario-analysis" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">ä¸­</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-namingserver">seata-namingserver</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-raft-config-center">Seata Raft Configuration Center</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-rpc-multi-protocol01">Seata&#x27;s RPC Communication Source Code Analysis 01(Transport)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-rpc-multi-protocol02">Seata&#x27;s RPC Communication Source Code Analysis 02(Multi-Version Protocols)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/how-to-write-unit-tests">How to Write Test Cases in Seata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/explore-seata-journey">Exploring the Journey of Open Source Development in Seata Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-raft-detailed-explanation">Seata-Raft Storage Mode in Depth and Getting Started</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-connect-data-and-application">Seata:Bridging Data and Applications</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-observable-practice">Observability Practices in Seata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-go-1.2.0">seata-go 1.2.0 Ready for Production Environment!!!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/iscas2023">6 Major Topics Now Open for Selection | Welcome to Apply for Seata Open Source Summer</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-1.6.0">Seata 1.6.0 Released with Significant Performance Improvement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-1.5.2">Seata 1.5.2 Released with XID Load Balancing Support</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-tcc-fence">Alibaba Seata Resolves Idempotence, Dangling, and Empty Rollback Issues in TCC Mode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-tcc">In-Depth Analysis of Seata TCC Mode (1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-lock">In-Depth Analysis of Seata AT Mode Transaction Isolation Levels and Global Lock Design</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-snowflake-explain">Q&amp;A on the New Version of Snowflake Algorithm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-UUID-generator">Analysis of Seata&#x27;s Distributed UUID Generator Based on Improved Snowflake Algorithm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-feature-undo-log-compress">Seata New Feature Support -- Undo_Log Compression</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-dsproxy-deadlock">Seata Deadlock Issue Caused by ConcurrentHashMap</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-client-start-analysis-02">Seata Application-Side Startup Process Analysis â Registry and Configuration Module</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-client-start-analysis-01">Analysis of Seata Application-Side Startup Process - How RM &amp; TM Establish Connections with TC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/integrate-seata-tcc-mode-with-spring-cloud">Integration of Spring Cloud with Seata for Distributed Transaction - TCC Mode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-config-manager">Analysis of Seata Configuration Management Principles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-golang-communication-mode">Detailed Explanation of seata-golang Communication Model</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-datasource-proxy">Analysis of Seata Data Source Proxy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-sourcecode-client-bootstrap">Seata Source Code - Client Startup Process in Distributed Transactions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-demo-in-mac">Setting Up Seata Demo Environment on Mac (AT Mode)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-rpc-refactor">The Refactoring Journey of Seata RPC Module</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-sourcecode-server-bootstrap">Seata Source Code - Server Startup Process in Distributed Transactions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-xa-introduce">How is distributed transaction realized? In-depth interpretation of Seata&#x27;s XA mode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-quick-start">Seata Quick Start</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-ha-practice">Seata High Availability Deployment Practice</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-config-modular">Seata Config Module Source Code Analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-dubbo-transmit-xid">Source Code Analysis of Seata-XID Propagation in Dubbo</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-tcc-modular">Seata TCC Module Source Code Analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-community-meetup-hangzhou-ready">Seata Community MeetupÂ·Hangzhou Station</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-core-modular">Seata Core Module Source Code Analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-spring-boot-aop-aspectj">Dynamically Creating/Closing Seata Distributed Transactions through AOP</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-dynamic-config-and-dynamic-disable">Seata Dynamic Configuration Subscription and Degradation Implementation Principles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-config-center">Seata Configuration Center Implementation Principles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-nacos-docker">Docker Deployment of Seata Integration with Nacos</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-nacos-analysis">Configuring Seata Distributed Transaction with Nacos as the Configuration Center</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-meetup-hangzhou">Seata Community MeetupÂ·Hangzhou Station</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-mybatisplus-analysis">Resolving the Issue of Losing Mybatis-Plus Features in Seata AT Mode Integration through Source Code</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/springboot-dubbo-mybatisplus-seata">Integrating Seata Distributed Transaction with SpringBoot+Dubbo+MybatisPlus</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-mode-start-rm-tm">Does Seata Client Need to Start RM and TM Simultaneously?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-mode-start">Seata AT Mode Startup Source Code Analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/design-more-flexable-application-by-saga">Designing More Flexible Financial Applications with Seata Saga</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-tcc-saga">Comprehensive Explanation of Distributed Transaction Seata and Its Three Modes</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-at-mode-design">Design Principles of Distributed Transaction Middleware Seata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-go-server">Seata Distributed Go Server Officially Open Source - Introduction to TaaS Design</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/how-to-support-spring-cloud">Fescar Integration with Spring Cloud In-Depth Analysis of Source Code</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/integrate-seata-with-spring-cloud">Integrating Seata (formerly Fescar) Distributed Transaction with Spring Cloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-java-client">Detailed Explanation of Seata-Client Principles and Processes in Distributed Transactions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-java-server">In-Depth Analysis of One-Stop Distributed Transaction Solution Seata-Server</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/tcc-mode-applicable-scenario-analysis">Analysis of Applicable Models and Scenarios for TCC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tcc-mode-design-principle">Introduction to TCC Theory and Design Implementation Guide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/quick-start-use-seata-and-dubbo-services">How to use Seata to ensure consistency between Dubbo Microservices</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/seata-analysis-simple">Unveiling the Principles of Fescar Distributed Transaction</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/manual-transaction-mode">MT mode</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Fescar 0.4.0 version released the TCC model, contributed by the ant gold service team, welcome to try, the end of the article also provides the project follow-up Roadmap, welcome to pay attention."><meta itemprop="keywords" content="seata,distributed transaction,TCC,roadmap"><header><h1 class="title_f1Hy" itemprop="headline">Analysis of Applicable Models and Scenarios for TCC</h1><div class="container_mt6G margin-vert--md"><time datetime="2019-03-27T00:00:00.000Z" itemprop="datePublished">March 27, 2019</time> Â· <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">zhangthen</span></div></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Fescar 0.4.0 version released the TCC model, contributed by the ant gold service team, welcome to try, the end of the article also provides the project follow-up Roadmap, welcome to pay attention.</p>
<a name="2143093f"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preface-application-scenarios-based-on-tcc-model">Preface: Application scenarios based on TCC model<a href="#preface-application-scenarios-based-on-tcc-model" class="hash-link" aria-label="Direct link to Preface: Application scenarios based on TCC model" title="Direct link to Preface: Application scenarios based on TCC model">â</a></h2>
<br>
<p><img decoding="async" loading="lazy" alt="1.png" src="/assets/images/TCC1-1d4e4883f0a4310852d664b2d0336227.png" width="625" height="303" class="img_ev3q"><br></p>
<p>The TCC distributed transaction model acts directly on the service layer. It is not coupled with the specific service framework, has nothing to do with the underlying RPC protocol, has nothing to do with the underlying storage media, can flexibly choose the locking granularity of the business resources, reduces the resource locking holding time, has good scalability, and can be said to be designed for independently deployed SOA services.</p>
<a name="d9b462de"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="i-tcc-model-advantages">I. TCC model advantages<a href="#i-tcc-model-advantages" class="hash-link" aria-label="Direct link to I. TCC model advantages" title="Direct link to I. TCC model advantages">â</a></h2>
<p>For TCC distributed transaction model, I think its application in business scenarios, there are two aspects of significance.</p>
<a name="95179108"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-distributed-transaction-across-services">1.1 Distributed transaction across services<a href="#11-distributed-transaction-across-services" class="hash-link" aria-label="Direct link to 1.1 Distributed transaction across services" title="Direct link to 1.1 Distributed transaction across services">â</a></h3>
<p>The splitting of services can also be thought of as horizontal scaling of resources, only in a different direction.</p>
<p>Horizontal extensions may go along two directions:</p>
<ol>
<li>functional scaling, where data is grouped according to function and different functional groups are distributed over multiple different databases, which is effectively servitisation under the SOA architecture.</li>
<li>data sharding, which adds a new dimension to horizontal scaling by splitting data across multiple databases within functional groups.</li>
</ol>
<p>The following figure briefly illustrates the horizontal data scaling strategy:</p>
<p><img decoding="async" loading="lazy" alt="2.png" src="/assets/images/TCC2-a511d666420fec7625e3fba934fcdea6.png" width="559" height="464" class="img_ev3q"></p>
<p>Therefore, one of the roles of TCC is to ensure the transaction property of multi-resource access when scaling resources horizontally by function.</p>
<a name="240e4d15"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-two-stage-splitting">1.2 Two-stage splitting<a href="#12-two-stage-splitting" class="hash-link" aria-label="Direct link to 1.2 Two-stage splitting" title="Direct link to 1.2 Two-stage splitting">â</a></h3>
<p>Another effect of TCC is that it splits the two phases into two separate phases that are related by means of resource business locking. The advantage of resource locking is that it does not block other transactions from continuing to use the same resources in the first phase, nor does it affect the correct execution of the second phase of the transaction.</p>
<p><strong>The traditional model of concurrent transactions:</strong><br>
<img decoding="async" loading="lazy" alt="3.png" src="/assets/images/TCC3-d1a3451fceeb603af33003ed849ff422.png" width="668" height="619" class="img_ev3q"></p>
<p><strong>Concurrent transactions for the TCC model:</strong><br>
<img decoding="async" loading="lazy" alt="4.png" src="/assets/images/TCC4-d88fd6484677d822f4924241cf806e26.png" width="676" height="458" class="img_ev3q"></p>
<p>How does this benefit the business? Taking the secured transaction scenario of Alipay, the simplified case involves only two services, the transaction service and the billing service. The transaction service is the main business service, and the accounting service is the slave business service, which provides the Try, Commit, and Cancel interfaces:</p>
<ol>
<li>The Try interface deducts the user&#x27;s available funds and transfers them to pre-frozen funds. Pre-frozen funds is the business locking programme, each transaction can only use the pre-frozen funds of this transaction in the second phase, and other concurrent transactions can continue to process the user&#x27;s available funds after the first phase of execution.</li>
<li>The Commit interface deducts the pre-frozen funds and increases the funds available in the intermediate account (secured transactions do not immediately credit the merchant and require an intermediate account for suspense).</li>
</ol>
<p>Assuming there is only one intermediary account, every time the Commit interface of the payment service is called, it locks the intermediary account, and there are hotspot performance issues with the intermediary account. However, in the secured transaction scenario, the funds need to be transferred from the intermediate account to the merchant only after seven days, and the intermediate account does not need to be displayed to the public. Therefore, after executing the first stage of the payment service, it can be considered that the payment part of this transaction has been completed and return the result of successful payment to the user and the merchant, and does not need to execute the Commit interface of the second stage of the payment service right away, and wait until the low-frontal period, and then slowly digest it and execute it asynchronously. <br>
<img decoding="async" loading="lazy" alt="5.png" src="/assets/images/TCC5-bad845fca6acd73c946d159389616705.png" width="730" height="647" class="img_ev3q"></p>
<p>This is the two-phase asynchronisation feature of TCC distributed transaction model, the first phase of execution from the business service is successful, the master business service can be committed to complete, and then the framework asynchronously execute the second phase of each slave business service.</p>
<a name="ad5fc026"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-purpose-tcc-solution">General-purpose TCC solution<a href="#general-purpose-tcc-solution" class="hash-link" aria-label="Direct link to General-purpose TCC solution" title="Direct link to General-purpose TCC solution">â</a></h2>
<p>The generic TCC solution is the most typical implementation of the TCC distributed transaction model, where all the slave business services need to participate in the decision making of the master business service. <br>
<img decoding="async" loading="lazy" alt="6.png" src="/assets/images/TCC6-30c79677bf0dd24ab9e6cf9edf68a7ea.png" width="654" height="554" class="img_ev3q"><br></p>
<a name="62b37e99"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="applicable-scenarios">Applicable scenarios<a href="#applicable-scenarios" class="hash-link" aria-label="Direct link to Applicable scenarios" title="Direct link to Applicable scenarios">â</a></h3>
<p>Since the slave business services are invoked synchronously and their results affect the decisions of the master business service, the generic TCC distributed transaction solution is suitable for businesses with deterministic and short execution times, such as the three most core services of an Internet financial enterprise: transaction, payment, and accounting:<br>
<img decoding="async" loading="lazy" alt="7.png" src="data:image/png;base64,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" width="920" height="170" class="img_ev3q"><br> <br> When a user initiates a transaction, the transaction service is accessed first to create the transaction order; then the transaction service calls the payment service to create the payment order for the transaction and performs the collection action, and finally, the payment service calls the billing service to record the account flow and bookkeeping.</p>
<p>In order to ensure that the three services work together to complete a transaction, either succeed or fail at the same time, you can use a general-purpose TCC solution that puts the three services in a distributed transaction, with the transaction as the master service, the payment as the slave service, and the billing as the nested slave service of the payment service, and the atomicity of the transaction is guaranteed by the TCC model. <br>
<img decoding="async" loading="lazy" alt="8.png" src="/assets/images/TCC8-29009ae632454b1a2c8048a7ffe74166.png" width="1102" height="348" class="img_ev3q"></p>
<p>The Try interface of the payment service creates the payment order, opens a nested distributed transaction, and calls the Try interface of the billing service; the billing service freezes the buyer&#x27;s funds in the Try interface. After the first stage of the call is completed, the transaction is completed, the local transaction is submitted, and the TCC framework completes the second stage of the distributed transaction from the business service.</p>
<p>The second stage of the payment service first calls the Confirm interface of the accounting service to deduct the buyer&#x27;s frozen funds and increase the seller&#x27;s available funds. After the call is successful, the payment service modifies the payment order to the completed state and completes the payment.</p>
<p>When both payment and billing service phase 2 are finished, the whole distributed transaction is finished.</p>
<a name="827f0f82"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronous-guaranteed-tcc-solution">Asynchronous guaranteed TCC solution<a href="#asynchronous-guaranteed-tcc-solution" class="hash-link" aria-label="Direct link to Asynchronous guaranteed TCC solution" title="Direct link to Asynchronous guaranteed TCC solution">â</a></h2>
<p>The direct slave service of the asynchronous assured TCC solution is the reliable messaging service, while the real slave service is decoupled by the messaging service and executed asynchronously as the consumer of the messaging service. <br>
<img decoding="async" loading="lazy" alt="9.png" src="/assets/images/TCC9-2552443ebc043eeec8c4131709ce880a.png" width="1004" height="555" class="img_ev3q"><br> <br> The Reliable Messaging Service needs to provide three interfaces, Try, Confirm, and Cancel. The Try interface pre-sends, and is only responsible for persistently storing the message data; the Confirm interface confirms the sending, and this is when the actual delivery of the message begins The Confirm interface confirms the delivery, which is when the actual delivery of the message begins; and the Cancel interface cancels the delivery and deletes the message data.</p>
<p>The message data of the message service is stored independently and scaled independently, which reduces the coupling between the business service and the messaging system, and achieves the ultimate consistency of the distributed transaction under the premise that the message service is reliable.</p>
<p>This solution increases the maintenance cost of message service, but since message service implements TCC interface instead of slave business service, slave business service doesn&#x27;t need any modification and the access cost is very low.</p>
<a name="62b37e99-1"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-scenario">Application scenario<a href="#application-scenario" class="hash-link" aria-label="Direct link to Application scenario" title="Direct link to Application scenario">â</a></h3>
<p>Since consuming messages from a business service is an asynchronous process, the execution time is uncertain, which may lead to an increase in the inconsistency time window. Therefore, the Asynchronous Ensured TCC Distributed Transaction Solution is only applicable to some passive businesses that are less sensitive to the final consistency time (the processing result of the slave business service does not affect the decision of the master business service, and only passively receives the decision result of the master business service). For example, the member registration service and the email sending service:<br>
<img decoding="async" loading="lazy" alt="10.png" src="data:image/png;base64,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" width="613" height="199" class="img_ev3q"><br>Â <br>When a user registers for a membership successfully, an email needs to be sent to the user to tell the user that the registration was successful and to prompt the user to activate the membership. But pay attention to two points:</p>
<ol>
<li>If the user registration is successful, make sure to send an email to the user;</li>
<li>if the user&#x27;s registration fails, an email must not be sent to the user.</li>
</ol>
<p>So again, this requires the membership service and the mail service to ensure atomicity, either both are executed or neither is executed. The difference is that the mail service is only a passive business, it does not affect whether the user can register successfully or not, it only needs to send an email to the user after the user has registered successfully, and the mail service does not need to be involved in the decision making of the activities of the membership service.</p>
<p>For this kind of business scenario, you can use the asynchronous ensured TCC distributed transaction solution, as follows:<br>
<img decoding="async" loading="lazy" alt="11.png" src="/assets/images/TCC11-7a885661dbcb087ae8b687c2a12a070f.png" width="1050" height="342" class="img_ev3q"><br>Â <br>Â <br> The reliable messaging service decouples the member and mail services, and the member service and the messaging service comprise the TCC transaction model, which ensures the atomicity of transactions. Then through the reliable feature of the message service, it ensures that the message can definitely be consumed by the mail service, so that the member and the mail service are in the same distributed transaction. At the same time, the mail service will not affect the execution process of the member service, and will only passively receive the request to send mail after the member service is executed successfully.</p>
<a name="69910d05"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compensated-tcc-solution">Compensated TCC solution<a href="#compensated-tcc-solution" class="hash-link" aria-label="Direct link to Compensated TCC solution" title="Direct link to Compensated TCC solution">â</a></h2>
<p>Compensated TCC solution is similar in structure to generic TCC solution, and its slave services also need to participate in the decision making of the main business service. However, the difference is that the former slave service only needs to provide Do and Compensate two interfaces, while the latter needs to provide three interfaces. <br>
<img decoding="async" loading="lazy" alt="12.png" src="/assets/images/TCC12-a0d59ce31dd8be48cba507fe17290b93.png" width="654" height="554" class="img_ev3q"><br>Â <br> The Do interface directly executes the real complete business logic, completes the business processing, and the result of the business execution is visible externally; the Compensate operation is used for the business compensation, which offsets or partially offsets the business result of the positive business operation. Compensate operation needs to satisfy idempotency. <br>Compensate operation is used to offset or partially offset the business results of positive business operations, and the Compensate operation needs to satisfy idempotency. <br>Compared with the general-purpose solution, Compensate solution does not need to transform the original business logic from the business service, and only needs to add an additional Compensate rollback logic, which is a lesser business transformation. However, it is important to note that the business executes the entire business logic in one phase and cannot achieve effective transaction isolation. When rollback is required, there may be a compensation failure, and additional exception handling mechanisms, such as manual intervention, are also required.</p>
<a name="62b37e99-2"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="applicable-scenarios-1">Applicable scenarios<a href="#applicable-scenarios-1" class="hash-link" aria-label="Direct link to Applicable scenarios" title="Direct link to Applicable scenarios">â</a></h3>
<p>Due to the existence of rollback compensation failure, the compensated TCC distributed transaction solution is only applicable to some of the less concurrent conflict or need to interact with external business, these external business is not a passive business, its execution results will affect the decision of the main business service, such as the ticket booking service of the air ticket agency:<br>
<img decoding="async" loading="lazy" alt="13.png" src="/assets/images/TCC13-5ae384dd97cb075f35297395f95c1c5c.png" width="960" height="501" class="img_ev3q"><br> <br> This air ticket service provides multi-destination air ticket booking service, which can book air tickets for multiple itinerary flights at the same time, e.g., to travel from Beijing to St. Petersburg, it is necessary to take the first journey from Beijing to Moscow, as well as the second journey from Moscow to St. Petersburg.</p>
<p>When a user books a ticket, he/she would definitely want to book tickets for both flights at the same time, and booking only one flight does not make sense for the user. Therefore, such a business service also imposes the atomicity requirement that if the booking for one of the flights fails, the other flight needs to be able to be cancelled.</p>
<p>However, it is extremely difficult to push the airlines to change as they are external to the ticket agents and only provide booking and cancellation interfaces. Therefore, for this type of business service, a compensated TCC distributed transaction solution can be used, as follows:<br>
<img decoding="async" loading="lazy" alt="14.png" src="/assets/images/TCC14-fc2e32a764cde16ce3573ffe65211c7b.png" width="1064" height="587" class="img_ev3q"></p>
<p>The gateway service adds the Compensate interface on top of the original logic, which is responsible for calling the cancellation interface of the corresponding airline.</p>
<p>When the user initiates a ticket booking request, the ticket service first calls the booking interface of each airline through the Do interface of the gateway, and if all flights are booked successfully, the whole distributed transaction is executed successfully; once the booking of tickets for a certain flight fails, the distributed transaction is rolled back, and the Compensate interface of each gateway is called by the TCC transaction framework, which then calls the corresponding airline&#x27;s The TCC transaction framework calls the Compensate compensation interface of each gateway, which then calls the corresponding airline&#x27;s cancellation interface. In this way, the atomicity of multi-way ticket booking service can also be guaranteed.</p>
<a name="acfe75a0"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v-summary">V. Summary<a href="#v-summary" class="hash-link" aria-label="Direct link to V. Summary" title="Direct link to V. Summary">â</a></h2>
<p>For today&#x27;s Internet applications, horizontal scaling of resources provides more flexibility and is a relatively easy to implement outward scaling solution, but at the same time, it also significantly increases the complexity and introduces some new challenges, such as data consistency issues between resources.</p>
<p>Horizontal data scaling can be done both by data slicing and by functionality. the TCC model ensures the transactional properties of multi-resource access while scaling resources horizontally by functionality.</p>
<p>TCC model in addition to the role of cross-service distributed transactions this layer , but also has a two-stage division of the function , through the business resource locking , allowing the second stage of asynchronous execution , and asynchronous idea is to solve the hot spot data concurrency performance problems of one of the tools . <br></p>
<a name="Roadmap"></a>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roadmap">Roadmap<a href="#roadmap" class="hash-link" aria-label="Direct link to Roadmap" title="Direct link to Roadmap">â</a></h2>
<p>Currently, we have released 0.4.0, and we will release 0.5 ~ 1.0 to continue to improve and enrich the functionality of AT and TCC modes, and to solve the problem of high availability of the server side. After 1.0, this open source product will reach the standard of production environment. <br><br><br><img decoding="async" loading="lazy" alt="image1.png" src="/assets/images/roadmap-30821aa2e9d0cc93e4697af4cd6a2393.png" width="1680" height="652" class="img_ev3q"><br></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/apache/incubator-seata-website/blob/docusaurus/i18n/en/docusaurus-plugin-content-blog/tcc-mode-applicable-scenario-analysis.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/seata-analysis-java-server"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">In-Depth Analysis of One-Stop Distributed Transaction Solution Seata-Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tcc-mode-design-principle"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Introduction to TCC Theory and Design Implementation Guide</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preface-application-scenarios-based-on-tcc-model" class="table-of-contents__link toc-highlight">Preface: Application scenarios based on TCC model</a></li><li><a href="#i-tcc-model-advantages" class="table-of-contents__link toc-highlight">I. TCC model advantages</a><ul><li><a href="#11-distributed-transaction-across-services" class="table-of-contents__link toc-highlight">1.1 Distributed transaction across services</a></li><li><a href="#12-two-stage-splitting" class="table-of-contents__link toc-highlight">1.2 Two-stage splitting</a></li></ul></li><li><a href="#general-purpose-tcc-solution" class="table-of-contents__link toc-highlight">General-purpose TCC solution</a><ul><li><a href="#applicable-scenarios" class="table-of-contents__link toc-highlight">Applicable scenarios</a></li></ul></li><li><a href="#asynchronous-guaranteed-tcc-solution" class="table-of-contents__link toc-highlight">Asynchronous guaranteed TCC solution</a><ul><li><a href="#application-scenario" class="table-of-contents__link toc-highlight">Application scenario</a></li></ul></li><li><a href="#compensated-tcc-solution" class="table-of-contents__link toc-highlight">Compensated TCC solution</a><ul><li><a href="#applicable-scenarios-1" class="table-of-contents__link toc-highlight">Applicable scenarios</a></li></ul></li><li><a href="#v-summary" class="table-of-contents__link toc-highlight">V. Summary</a></li><li><a href="#roadmap" class="table-of-contents__link toc-highlight">Roadmap</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://incubator.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/apache/incubator.svg" alt="Apache Incubator Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/apache/incubator.svg" alt="Apache Incubator Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">
                  <div class="fs-12">
                    <div class="center-div">
                      <span>Apache Seata (incubating) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</span>
                    </div>
                    <br>
                    <div class="center-div">
                      <span>Copyright Â© 2023-2024, The Apache Software Foundation Apache Seata, Seata, Apache, Apache Incubator, the Apache feather, the Apache Incubator logo and the Apache Seata project logo are either registered trademarks or trademarks of the Apache Software Foundation.</span>
                      <br>
                    </div>
                    <br>
                  </div>
                  </div></div></div></footer></div>
</body>
</html>